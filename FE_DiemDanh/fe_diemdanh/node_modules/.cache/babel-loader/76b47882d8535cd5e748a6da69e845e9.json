{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nguye\\\\Desktop\\\\FE_DiemDanh\\\\fe_diemdanh\\\\src\\\\screens\\\\QrScanner.js\";\nimport React, { Component } from \"react\";\nimport QrReader from \"react-qr-reader\";\n\nconst axios = require(\"axios\").default;\n\nconst axiosDiemDanh = axios.create({\n  baseURL: \"http://localhost:2212/api/\"\n});\n\nclass QrScanner extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      result: \"No result\",\n      current_user: {},\n      checkins: []\n    };\n\n    this.getUserInfo = _id => {\n      axiosDiemDanh.get(`/user/${_id}`).then(res => {\n        if (res.success) {\n          this.setState({\n            current_user: res.data\n          });\n        } else this.setState({\n          current_user: {}\n        });\n      });\n    };\n\n    this.createCheckin = _user_id => {\n      axiosDiemDanh.post(\"/checkin\", {\n        user_id: _user_id\n      }).then(res => {\n        if (res.success) {\n          this.getCheckins();\n        }\n      }).catch(err => console.log(err));\n    };\n\n    this.getCheckins = () => {\n      axiosDiemDanh.get(\"/checkins\").then(res => this.setState({\n        checkins: res.data\n      }));\n    };\n\n    this.handleScan = data => {\n      if (data) {\n        this.setState({\n          result: data\n        }, () => {\n          this.getUserInfo(data);\n          this.createCheckin(data);\n        });\n      }\n    };\n\n    this.handleError = err => {\n      console.error(err);\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(QrReader, {\n      delay: 5000,\n      onError: this.handleError,\n      onScan: this.handleScan,\n      style: {\n        width: \"20%\",\n        height: \"20%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, this.state.result), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, this.state.current_user.name));\n  }\n\n}\n\nexport default QrScanner;","map":{"version":3,"sources":["C:/Users/nguye/Desktop/FE_DiemDanh/fe_diemdanh/src/screens/QrScanner.js"],"names":["React","Component","QrReader","axios","require","default","axiosDiemDanh","create","baseURL","QrScanner","state","result","current_user","checkins","getUserInfo","_id","get","then","res","success","setState","data","createCheckin","_user_id","post","user_id","getCheckins","catch","err","console","log","handleScan","handleError","error","render","width","height","name"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,iBAArB;;AACA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAP,CAAiBC,OAA/B;;AACA,MAAMC,aAAa,GAAGH,KAAK,CAACI,MAAN,CAAa;AACjCC,EAAAA,OAAO,EAAE;AADwB,CAAb,CAAtB;;AAGA,MAAMC,SAAN,SAAwBR,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAChCS,KADgC,GACxB;AACNC,MAAAA,MAAM,EAAE,WADF;AAENC,MAAAA,YAAY,EAAE,EAFR;AAGNC,MAAAA,QAAQ,EAAE;AAHJ,KADwB;;AAAA,SAMhCC,WANgC,GAMlBC,GAAG,IAAI;AACnBT,MAAAA,aAAa,CAACU,GAAd,CAAmB,SAAQD,GAAI,EAA/B,EAAkCE,IAAlC,CAAuCC,GAAG,IAAI;AAC5C,YAAIA,GAAG,CAACC,OAAR,EAAiB;AACf,eAAKC,QAAL,CAAc;AAAER,YAAAA,YAAY,EAAEM,GAAG,CAACG;AAApB,WAAd;AACD,SAFD,MAEO,KAAKD,QAAL,CAAc;AAAER,UAAAA,YAAY,EAAE;AAAhB,SAAd;AACR,OAJD;AAKD,KAZ+B;;AAAA,SAahCU,aAbgC,GAahBC,QAAQ,IAAI;AAC1BjB,MAAAA,aAAa,CACVkB,IADH,CACQ,UADR,EACoB;AAAEC,QAAAA,OAAO,EAAEF;AAAX,OADpB,EAEGN,IAFH,CAEQC,GAAG,IAAI;AACX,YAAIA,GAAG,CAACC,OAAR,EAAiB;AACf,eAAKO,WAAL;AACD;AACF,OANH,EAOGC,KAPH,CAOSC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAPhB;AAQD,KAtB+B;;AAAA,SAuBhCF,WAvBgC,GAuBlB,MAAM;AAClBpB,MAAAA,aAAa,CACVU,GADH,CACO,WADP,EAEGC,IAFH,CAEQC,GAAG,IAAI,KAAKE,QAAL,CAAc;AAAEP,QAAAA,QAAQ,EAAEK,GAAG,CAACG;AAAhB,OAAd,CAFf;AAGD,KA3B+B;;AAAA,SA4BhCU,UA5BgC,GA4BnBV,IAAI,IAAI;AACnB,UAAIA,IAAJ,EAAU;AACR,aAAKD,QAAL,CACE;AACET,UAAAA,MAAM,EAAEU;AADV,SADF,EAIE,MAAM;AACJ,eAAKP,WAAL,CAAiBO,IAAjB;AACA,eAAKC,aAAL,CAAmBD,IAAnB;AACD,SAPH;AASD;AACF,KAxC+B;;AAAA,SAyChCW,WAzCgC,GAyClBJ,GAAG,IAAI;AACnBC,MAAAA,OAAO,CAACI,KAAR,CAAcL,GAAd;AACD,KA3C+B;AAAA;;AA4ChCM,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,QAAD;AACE,MAAA,KAAK,EAAE,IADT;AAEE,MAAA,OAAO,EAAE,KAAKF,WAFhB;AAGE,MAAA,MAAM,EAAE,KAAKD,UAHf;AAIE,MAAA,KAAK,EAAE;AAAEI,QAAAA,KAAK,EAAE,KAAT;AAAgBC,QAAAA,MAAM,EAAE;AAAxB,OAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAK1B,KAAL,CAAWC,MAAf,CAPF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAKD,KAAL,CAAWE,YAAX,CAAwByB,IAA5B,CARF,CADF;AAYD;;AAzD+B;;AA2DlC,eAAe5B,SAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport QrReader from \"react-qr-reader\";\r\nconst axios = require(\"axios\").default;\r\nconst axiosDiemDanh = axios.create({\r\n  baseURL: \"http://localhost:2212/api/\"\r\n});\r\nclass QrScanner extends Component {\r\n  state = {\r\n    result: \"No result\",\r\n    current_user: {},\r\n    checkins: []\r\n  };\r\n  getUserInfo = _id => {\r\n    axiosDiemDanh.get(`/user/${_id}`).then(res => {\r\n      if (res.success) {\r\n        this.setState({ current_user: res.data });\r\n      } else this.setState({ current_user: {} });\r\n    });\r\n  };\r\n  createCheckin = _user_id => {\r\n    axiosDiemDanh\r\n      .post(\"/checkin\", { user_id: _user_id })\r\n      .then(res => {\r\n        if (res.success) {\r\n          this.getCheckins();\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n  getCheckins = () => {\r\n    axiosDiemDanh\r\n      .get(\"/checkins\")\r\n      .then(res => this.setState({ checkins: res.data }));\r\n  };\r\n  handleScan = data => {\r\n    if (data) {\r\n      this.setState(\r\n        {\r\n          result: data\r\n        },\r\n        () => {\r\n          this.getUserInfo(data);\r\n          this.createCheckin(data);\r\n        }\r\n      );\r\n    }\r\n  };\r\n  handleError = err => {\r\n    console.error(err);\r\n  };\r\n  render() {\r\n    return (\r\n      <div>\r\n        <QrReader\r\n          delay={5000}\r\n          onError={this.handleError}\r\n          onScan={this.handleScan}\r\n          style={{ width: \"20%\", height: \"20%\" }}\r\n        />\r\n        <p>{this.state.result}</p>\r\n        <p>{this.state.current_user.name}</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default QrScanner;\r\n"]},"metadata":{},"sourceType":"module"}