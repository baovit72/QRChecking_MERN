{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nguye\\\\Desktop\\\\FE_DiemDanh\\\\fe_diemdanh\\\\src\\\\screens\\\\QrScanner.js\";\nimport React, { Component } from \"react\";\nimport QrReader from \"react-qr-reader\";\n\nconst axios = require(\"axios\").default;\n\nconst axiosDiemDanh = axios.create({\n  baseURL: \"http://localhost:2212/api/\"\n});\n\nclass QrScanner extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      result: \"No result\",\n      current_user: {},\n      checkins: []\n    };\n\n    this.getUserInfo = async _id => {\n      await axiosDiemDanh.get(`/user/${_id}`).then(res => {\n        if (res.success) {\n          return res.data;\n        } else return {};\n      }).catch(err => console.log(err));\n    };\n\n    this.createCheckin = async _user_id => {\n      await axiosDiemDanh.post(\"/checkin\", {\n        user_id: _user_id\n      }).then(res => {\n        console.log(res);\n\n        if (res.success) {\n          return this.getCheckins();\n        } else {\n          return this.state.checkins;\n        }\n      }).catch(err => console.log(err));\n    };\n\n    this.getCheckins = () => {\n      axiosDiemDanh.get(\"/checkins\").then(res => {\n        return res.data;\n      }).catch(err => console.log(err));\n    };\n\n    this.handleScan = data => {\n      if (data) {\n        this.setState({\n          result: data,\n          current_user: this.getUserInfo(data),\n          checkins: this.createCheckin(data)\n        });\n      }\n    };\n\n    this.handleError = err => {\n      console.error(err);\n    };\n  }\n\n  render() {\n    console.log(this.state);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(QrReader, {\n      delay: 5000,\n      onError: this.handleError,\n      onScan: this.handleScan,\n      style: {\n        width: \"20%\",\n        height: \"20%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, this.state.result), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, this.state.current_user.name));\n  }\n\n}\n\nexport default QrScanner;","map":{"version":3,"sources":["C:/Users/nguye/Desktop/FE_DiemDanh/fe_diemdanh/src/screens/QrScanner.js"],"names":["React","Component","QrReader","axios","require","default","axiosDiemDanh","create","baseURL","QrScanner","state","result","current_user","checkins","getUserInfo","_id","get","then","res","success","data","catch","err","console","log","createCheckin","_user_id","post","user_id","getCheckins","handleScan","setState","handleError","error","render","width","height","name"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,iBAArB;;AACA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAP,CAAiBC,OAA/B;;AACA,MAAMC,aAAa,GAAGH,KAAK,CAACI,MAAN,CAAa;AACjCC,EAAAA,OAAO,EAAE;AADwB,CAAb,CAAtB;;AAGA,MAAMC,SAAN,SAAwBR,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAChCS,KADgC,GACxB;AACNC,MAAAA,MAAM,EAAE,WADF;AAENC,MAAAA,YAAY,EAAE,EAFR;AAGNC,MAAAA,QAAQ,EAAE;AAHJ,KADwB;;AAAA,SAMhCC,WANgC,GAMlB,MAAMC,GAAN,IAAa;AACzB,YAAMT,aAAa,CAACU,GAAd,CAAmB,SAAQD,GAAI,EAA/B,EAAkCE,IAAlC,CAAuCC,GAAG,IAAI;AAClD,YAAIA,GAAG,CAACC,OAAR,EAAiB;AACf,iBAAOD,GAAG,CAACE,IAAX;AACD,SAFD,MAEO,OAAO,EAAP;AACR,OAJK,EAIHC,KAJG,CAIGC,GAAG,IAAEC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAJR,CAAN;AAKD,KAZ+B;;AAAA,SAahCG,aAbgC,GAahB,MAAMC,QAAN,IAAkB;AAChC,YAAMpB,aAAa,CAChBqB,IADG,CACE,UADF,EACc;AAAEC,QAAAA,OAAO,EAAEF;AAAX,OADd,EAEHT,IAFG,CAEEC,GAAG,IAAI;AACXK,QAAAA,OAAO,CAACC,GAAR,CAAYN,GAAZ;;AACA,YAAIA,GAAG,CAACC,OAAR,EAAiB;AACf,iBAAO,KAAKU,WAAL,EAAP;AACD,SAFD,MAEO;AACL,iBAAO,KAAKnB,KAAL,CAAWG,QAAlB;AACD;AACF,OATG,EAUHQ,KAVG,CAUGC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAVV,CAAN;AAWD,KAzB+B;;AAAA,SA0BhCO,WA1BgC,GA0BlB,MAAM;AAClBvB,MAAAA,aAAa,CACVU,GADH,CACO,WADP,EAEGC,IAFH,CAEQC,GAAG,IAAI;AACX,eAAOA,GAAG,CAACE,IAAX;AACD,OAJH,EAKGC,KALH,CAKSC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CALhB;AAMD,KAjC+B;;AAAA,SAkChCQ,UAlCgC,GAkCnBV,IAAI,IAAI;AACnB,UAAIA,IAAJ,EAAU;AACR,aAAKW,QAAL,CAAc;AACZpB,UAAAA,MAAM,EAAES,IADI;AAEZR,UAAAA,YAAY,EAAE,KAAKE,WAAL,CAAiBM,IAAjB,CAFF;AAGZP,UAAAA,QAAQ,EAAE,KAAKY,aAAL,CAAmBL,IAAnB;AAHE,SAAd;AAKD;AACF,KA1C+B;;AAAA,SA2ChCY,WA3CgC,GA2ClBV,GAAG,IAAI;AACnBC,MAAAA,OAAO,CAACU,KAAR,CAAcX,GAAd;AACD,KA7C+B;AAAA;;AA8ChCY,EAAAA,MAAM,GAAG;AACPX,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKd,KAAjB;AACA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,QAAD;AACE,MAAA,KAAK,EAAE,IADT;AAEE,MAAA,OAAO,EAAE,KAAKsB,WAFhB;AAGE,MAAA,MAAM,EAAE,KAAKF,UAHf;AAIE,MAAA,KAAK,EAAE;AAAEK,QAAAA,KAAK,EAAE,KAAT;AAAgBC,QAAAA,MAAM,EAAE;AAAxB,OAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAK1B,KAAL,CAAWC,MAAf,CAPF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAKD,KAAL,CAAWE,YAAX,CAAwByB,IAA5B,CARF,CADF;AAYD;;AA5D+B;;AA8DlC,eAAe5B,SAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport QrReader from \"react-qr-reader\";\r\nconst axios = require(\"axios\").default;\r\nconst axiosDiemDanh = axios.create({\r\n  baseURL: \"http://localhost:2212/api/\"\r\n});\r\nclass QrScanner extends Component {\r\n  state = {\r\n    result: \"No result\",\r\n    current_user: {},\r\n    checkins: []\r\n  };\r\n  getUserInfo = async _id => {\r\n    await axiosDiemDanh.get(`/user/${_id}`).then(res => {\r\n      if (res.success) { \r\n        return res.data;\r\n      } else return {};\r\n    }).catch(err=>console.log(err));\r\n  };\r\n  createCheckin = async _user_id => {\r\n    await axiosDiemDanh\r\n      .post(\"/checkin\", { user_id: _user_id })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          return this.getCheckins();\r\n        } else {\r\n          return this.state.checkins;\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n  getCheckins = () => {\r\n    axiosDiemDanh\r\n      .get(\"/checkins\")\r\n      .then(res => {\r\n        return res.data;\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n  handleScan = data => {\r\n    if (data) {\r\n      this.setState({\r\n        result: data,\r\n        current_user: this.getUserInfo(data),\r\n        checkins: this.createCheckin(data)\r\n      });\r\n    }\r\n  };\r\n  handleError = err => {\r\n    console.error(err);\r\n  };\r\n  render() {\r\n    console.log(this.state);\r\n    return (\r\n      <div>\r\n        <QrReader\r\n          delay={5000}\r\n          onError={this.handleError}\r\n          onScan={this.handleScan}\r\n          style={{ width: \"20%\", height: \"20%\" }}\r\n        />\r\n        <p>{this.state.result}</p>\r\n        <p>{this.state.current_user.name}</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default QrScanner;\r\n"]},"metadata":{},"sourceType":"module"}