{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nguye\\\\Desktop\\\\FE_DiemDanh\\\\fe_diemdanh\\\\src\\\\screens\\\\QrScanner.js\";\nimport React, { Component } from \"react\";\nimport QrReader from \"react-qr-reader\";\nimport CheckinTable from './CheckinTable';\nimport RNBeep from 'react-native-a-beep';\n\nconst axios = require(\"axios\").default;\n\nconst axiosDiemDanh = axios.create({\n  baseURL: \"http://localhost:2212/api/\"\n});\n\nclass QrScanner extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      result: \"No result\",\n      current_user: {},\n      checkins: []\n    };\n\n    this.getUserInfo = async _id => {\n      await axiosDiemDanh.get(`/user/${_id}`).then(res => {\n        console.log(res);\n\n        if (res.data.success) {\n          this.setState({\n            current_user: res.data.data\n          });\n        } else this.setState({\n          current_user: {}\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.createCheckin = async _user_id => {\n      await axiosDiemDanh.post(\"/checkin\", {\n        user_id: _user_id\n      }).then(res => {\n        if (res.data.success) {\n          this.getCheckins();\n        }\n      }).catch(err => console.log(err));\n    };\n\n    this.getCheckins = async () => {\n      await axiosDiemDanh.get(\"/checkins\").then(res => {\n        console.log(res);\n        this.setState({\n          checkins: res.data.data\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.handleScan = data => {\n      RNBeep.beep();\n\n      if (data) {\n        this.getUserInfo(data);\n        this.createCheckin(data);\n        this.setState({\n          result: data\n        });\n      }\n    };\n\n    this.handleError = err => {\n      console.error(err);\n    };\n  }\n\n  componentDidMount() {\n    this.getCheckins();\n  }\n\n  render() {\n    console.log(this.state);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(QrReader, {\n      delay: 5000,\n      onError: this.handleError,\n      onScan: this.handleScan,\n      style: {\n        width: \"20%\",\n        height: \"20%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, this.state.result), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, this.state.current_user.name), React.createElement(CheckinTable, {\n      checkins: this.state.checkins,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default QrScanner;","map":{"version":3,"sources":["C:/Users/nguye/Desktop/FE_DiemDanh/fe_diemdanh/src/screens/QrScanner.js"],"names":["React","Component","QrReader","CheckinTable","RNBeep","axios","require","default","axiosDiemDanh","create","baseURL","QrScanner","state","result","current_user","checkins","getUserInfo","_id","get","then","res","console","log","data","success","setState","catch","err","createCheckin","_user_id","post","user_id","getCheckins","handleScan","beep","handleError","error","componentDidMount","render","width","height","name"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport QrReader from \"react-qr-reader\";\r\nimport CheckinTable from './CheckinTable'\r\nimport RNBeep from 'react-native-a-beep';\r\nconst axios = require(\"axios\").default;\r\nconst axiosDiemDanh = axios.create({\r\n  baseURL: \"http://localhost:2212/api/\"\r\n});\r\nclass QrScanner extends Component {\r\n  state = {\r\n    result: \"No result\",\r\n    current_user: {},\r\n    checkins: []\r\n  };\r\n  getUserInfo = async _id => {\r\n    await axiosDiemDanh\r\n      .get(`/user/${_id}`)\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.data.success) {\r\n          this.setState({ current_user: res.data.data });\r\n        } else this.setState({ current_user: {} });\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n  createCheckin = async _user_id => {\r\n    await axiosDiemDanh\r\n      .post(\"/checkin\", { user_id: _user_id })\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.getCheckins();\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n  getCheckins = async () => {\r\n    await axiosDiemDanh\r\n      .get(\"/checkins\")\r\n      .then(res => {\r\n        console.log(res);\r\n        this.setState({ checkins: res.data.data });\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n  handleScan = data => {\r\n    RNBeep.beep();\r\n    if (data) {\r\n      this.getUserInfo(data);\r\n      this.createCheckin(data);\r\n      this.setState({\r\n        result: data\r\n      });\r\n    }\r\n  };\r\n  handleError = err => {\r\n    console.error(err);\r\n  };\r\n  componentDidMount(){\r\n    this.getCheckins();\r\n  }\r\n  render() {\r\n    console.log(this.state);\r\n    return (\r\n      <div>\r\n        <QrReader\r\n          delay={5000}\r\n          onError={this.handleError}\r\n          onScan={this.handleScan}\r\n          style={{ width: \"20%\", height: \"20%\" }}\r\n        />\r\n        <p>{this.state.result}</p>\r\n        <p>{this.state.current_user.name}</p>\r\n        <CheckinTable checkins = {this.state.checkins}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default QrScanner;\r\n"]},"metadata":{},"sourceType":"module"}