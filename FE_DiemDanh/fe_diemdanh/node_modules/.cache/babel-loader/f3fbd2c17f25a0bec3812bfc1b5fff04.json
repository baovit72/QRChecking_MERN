{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nguye\\\\Desktop\\\\FE_DiemDanh\\\\fe_diemdanh\\\\src\\\\screens\\\\QrScanner.js\";\nimport React, { Component } from \"react\";\nimport QrReader from \"react-qr-reader\";\n\nconst axios = require(\"axios\").default;\n\nconst axiosDiemDanh = axios.create({\n  baseURL: \"http://localhost:2212/api/\"\n});\n\nclass QrScanner extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      result: \"No result\",\n      current_user: {},\n      checkins: []\n    };\n\n    this.getUserInfo = _id => {\n      axiosDiemDanh.get(`/user/${_id}`).then(res => {\n        if (res.success) {\n          return res.data;\n          console.log(res.data);\n        } else return {};\n      });\n    };\n\n    this.createCheckin = _user_id => {\n      axiosDiemDanh.post(\"/checkin\", {\n        user_id: _user_id\n      }).then(res => {\n        console.log(res);\n\n        if (res.success) {\n          return this.getCheckins();\n        } else {\n          return this.state.checkins;\n        }\n      }).catch(err => console.log(err));\n    };\n\n    this.getCheckins = () => {\n      axiosDiemDanh.get(\"/checkins\").then(res => {\n        return res.data;\n      }).catch(err => console.log(err));\n    };\n\n    this.handleScan = data => {\n      if (data) {\n        this.setState({\n          result: data,\n          current_user: this.getUserInfo(data),\n          checkins: this.createCheckin(data)\n        });\n      }\n    };\n\n    this.handleError = err => {\n      console.error(err);\n    };\n  }\n\n  render() {\n    console.log(this.state);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(QrReader, {\n      delay: 5000,\n      onError: this.handleError,\n      onScan: this.handleScan,\n      style: {\n        width: \"20%\",\n        height: \"20%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, this.state.result), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, this.state.current_user.name));\n  }\n\n}\n\nexport default QrScanner;","map":{"version":3,"sources":["C:/Users/nguye/Desktop/FE_DiemDanh/fe_diemdanh/src/screens/QrScanner.js"],"names":["React","Component","QrReader","axios","require","default","axiosDiemDanh","create","baseURL","QrScanner","state","result","current_user","checkins","getUserInfo","_id","get","then","res","success","data","console","log","createCheckin","_user_id","post","user_id","getCheckins","catch","err","handleScan","setState","handleError","error","render","width","height","name"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport QrReader from \"react-qr-reader\";\r\nconst axios = require(\"axios\").default;\r\nconst axiosDiemDanh = axios.create({\r\n  baseURL: \"http://localhost:2212/api/\"\r\n});\r\nclass QrScanner extends Component {\r\n  state = {\r\n    result: \"No result\",\r\n    current_user: {},\r\n    checkins: []\r\n  };\r\n  getUserInfo = _id => {\r\n    axiosDiemDanh.get(`/user/${_id}`).then(res => {\r\n      if (res.success) {\r\n        return res.data;\r\n        console.log(res.data)\r\n      } else return {};\r\n    });\r\n  };\r\n  createCheckin = _user_id => {\r\n    axiosDiemDanh\r\n      .post(\"/checkin\", { user_id: _user_id })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          return this.getCheckins();\r\n        } else {\r\n          return this.state.checkins;\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n  getCheckins = () => {\r\n    axiosDiemDanh\r\n      .get(\"/checkins\")\r\n      .then(res => {\r\n        return res.data;\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n  handleScan = data => {\r\n    if (data) {\r\n      this.setState({\r\n        result: data,\r\n        current_user: this.getUserInfo(data),\r\n        checkins: this.createCheckin(data)\r\n      });\r\n    }\r\n  };\r\n  handleError = err => {\r\n    console.error(err);\r\n  };\r\n  render() {\r\n    console.log(this.state);\r\n    return (\r\n      <div>\r\n        <QrReader\r\n          delay={5000}\r\n          onError={this.handleError}\r\n          onScan={this.handleScan}\r\n          style={{ width: \"20%\", height: \"20%\" }}\r\n        />\r\n        <p>{this.state.result}</p>\r\n        <p>{this.state.current_user.name}</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default QrScanner;\r\n"]},"metadata":{},"sourceType":"module"}